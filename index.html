<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STOP 챌린지 | 반응속도 테스트</title>

  <link rel="icon" href="assets/icons/favicon.svg" type="image/svg+xml" />
  <link rel="icon" href="assets/icons/favicon.ico" sizes="any" />
  <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png" />
  <link rel="manifest" href="manifest.webmanifest" />

  <meta name="theme-color" content="#121216" />
  <meta name="description" content="00:00에서 시작해 실시간으로 올라가는 시간을 보고, 목표 시간에 STOP을 눌러 성공하세요." />

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg"></div>

  <header class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true">⏱️</div>
      <div>
        <div class="title">STOP 챌린지</div>
        <div class="subtitle">목표 시간에 딱 맞춰 STOP!</div>
      </div>
    </div>

    
    <div class="top-actions">
      <button class="ghost" id="btnHow">규칙</button>
      <div class="vol">
        <span class="vol-ico" aria-hidden="true">🔉</span>
        <input id="volRange" class="vol-range" type="range" min="0" max="100" value="80" aria-label="효과음 볼륨" />
      </div>
      <button class="ghost" id="btnFull" title="전체화면">⛶</button>
      <button class="ghost" id="btnSound" aria-pressed="true" title="사운드 켜기/끄기">🔊</button>
    </div>

  </header>

  <main class="wrap">
    <section class="card stage-card" aria-label="스테이지 선택">
      <h2>스테이지</h2>
      <p class="muted">원하는 목표 시간을 선택하고 시작하세요.</p>

      <div class="stages" role="tablist" aria-label="스테이지 버튼">
        <button class="stage" data-sec="10" role="tab" aria-selected="true">
          <div class="stage-time">10초</div>
          <div class="stage-sub">목표: <b>10:00</b></div>
        </button>
        <button class="stage" data-sec="30" role="tab" aria-selected="false">
          <div class="stage-time">30초</div>
          <div class="stage-sub">목표: <b>30:00</b></div>
        </button>
        <button class="stage" data-sec="60" role="tab" aria-selected="false">
          <div class="stage-time">60초</div>
          <div class="stage-sub">목표: <b>60:00</b></div>
        </button>
      </div>

      <div class="stats">
        <div class="stat">
          <div class="stat-label">최고 기록</div>
          <div class="stat-value" id="bestValue">—</div>
        </div>
        <div class="stat">
          <div class="stat-label">시도 횟수</div>
          <div class="stat-value" id="triesValue">0</div>
        </div>
      </div>
    </section>

    <section class="card game-card" aria-label="게임 화면">
      <h2 id="gameTitle">10초 맞추기 게임</h2>
      <p class="muted" id="gameSub">목표 시간에 정확히 STOP을 누르세요.</p>

      <div class="mode-row" aria-label="게임 모드">
        <button class="ghost" id="btnRandom" type="button" aria-pressed="false">랜덤 목표: OFF</button>
        <button class="ghost" id="btnNewRandom" type="button" hidden>새 랜덤 목표</button>
      </div>

      <div class="timer-box" aria-live="polite">
        <div class="timer" id="timer">00:00</div>
        <div class="timer-hint">
          (형식: <b>초:센티초</b> / 예: 10:00)
        </div>
      </div>

      <div class="controls">
        <button class="primary" id="btnStart">START</button>
        <button class="stop" id="btnStop" disabled>STOP</button>
        <button class="ghost" id="btnReset" disabled>RESET</button>
      </div>

      
      <div class="result" id="result" hidden>
        <div class="result-title" id="resultTitle"></div>
        <div class="result-grade" id="resultGrade"></div>
        <div class="result-sub" id="resultSub"></div>
        <div class="result-actions-inline">
          <button class="ghost" id="btnSave" type="button">결과 저장(PNG)</button>
        </div>
      </div>

<div class="result-sub" id="resultSub"></div>
</div>

      
    </section>
  </main>

  <!-- Fullscreen FX canvas (kept OUTSIDE cards so transforms don't clip fixed positioning) -->
  <canvas id="fx" class="fx" width="1" height="1" aria-hidden="true"></canvas>

  <dialog id="how" class="how">
    <form method="dialog">
      <h3>규칙</h3>
      <ol>
        <li>시간은 <b>00:00</b>에서 시작해 실시간으로 증가합니다.</li>
        <li>목표 시간(<b>10:00</b> / <b>30:00</b> / <b>60:00</b>)에 맞춰 <b>STOP</b>을 누르세요.</li>
        <li>표시된 시간이 목표와 <b>완전히 동일</b>하면 성공! 아니면 실패!</li>
      </ol>
      <p class="muted">팁: “정확히 00” 센티초에 맞추려면 마지막 1초를 마음속으로 카운트해보세요. (실패해도 괜찮아요. 인생도 원래… 1프레임씩 밀립니다 😇)</p>
      <menu>
        <button class="primary">확인</button>
      </menu>
    </form>
  </dialog>

  <footer class="footer">
    <div>© STOP Challenge · 로컬 저장(LocalStorage)로 최고기록을 보관합니다.</div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
